// toogle filter
let filterBtn = document.querySelector(".filter-action");
let filterType = document.querySelector(".filter-type");

filterBtn.addEventListener("click", () => {
  if (filterType.classList.contains("d-none")) {
    filterType.classList.add("d-flex");
    filterType.classList.remove("d-none");
  } else {
    filterType.classList.remove("d-flex");
    filterType.classList.add("d-none");
  }
});

// fetch users
let rowUserList = document.querySelector(".row-users");
let searchInput = document.querySelector(".search-input");
let alertMsg = document.querySelector(".alert-msg");
let sortAz = document.querySelector(".sort-az");
let sortZa = document.querySelector(".sort-za");
let loaderSection = document.querySelector(".loader-section");
// let customer_name = document.querySelector(".name");
// let customer_username = document.querySelector(".nickname");
// let customer_catchPhase = document.querySelector(".role");
// let customer_email = document.querySelector(".email");
// let customer_street_suite = document.querySelector(".street-suite");
// let customer_city_zip = document.querySelector(".city-zip");
// let customer_lat_lng = document.querySelector(".lat-lng");
// let customer_phone = document.querySelector(".phone");
// let customer_website = document.querySelector(".website");
// let company_name = document.querySelector(".company-name");
// let company_bs = document.querySelector(".company-bs");

let customersData = [];

fetch("https://jsonplaceholder.typicode.com/users")
  .then((res) => res.json())
  .then((info) => {
    customersData = info;

    displayCustomers(customersData);

    searchInput.addEventListener("input", searchedCustomers);

    sortAz.addEventListener("click", sortCustomersAz);

    sortZa.addEventListener("click", sortCustomersZa);
  })
  .catch((error) => {
    console.error("failed to fetch records:", error);
  });

// function to display all customer record
function displayCustomers(info) {
  rowUserList.innerHTML = "";
  info.forEach((customer) => {
    loaderSection.style.display = "flex";
    const customerInfo = document.createElement("div");
    https://gravatar.com/avatar/205e460b479e2e5b48aec07710c08d50
    // const avatarUrl = `https://www.gravatar.com/avatar/${faker.random.uuid()}?d=identicon`; // Generate a unique avatar URL
    customerInfo.classList.add("col-lg-3"); // Adjust the column width as needed
    customerInfo.innerHTML =
    `
    <div class="user">
    <div class="user-img-role-section">
    <div class="user-img img-fluid">
        <img src="/assets/user.png" alt="" />
          </div>
          <div class="user-desc-100">
            <span class="name">${customer.name}</span>
            <span class="nickname">${customer.username}</span>
            <span class="role">"${customer.company.catchPhrase}"</span>
          </div>
        </div>
  
        <div class="user-desc-200">
          <div class="user-desc-row">
            <span class="user-desc-icon">
              <svg
                width="23"
                height="23"
                viewBox="0 0 25 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12.3579 13.1963L12.3567 13.1952C11.1052 12.0679 6.94012 8.52975 4.44786 6.4186C4.60569 6.29257 4.79834 6.225 5.00003 6.225H20C20.2017 6.225 20.3944 6.29257 20.5522 6.4186C18.0599 8.52979 13.8947 12.0683 12.6422 13.1967L12.6416 13.1972C12.5573 13.2734 12.5121 13.2746 12.5 13.2746C12.4888 13.2746 12.4433 13.2737 12.3579 13.1963ZM4.2953 6.57298L4.29531 6.57297L4.2953 6.57298Z"
                  stroke="#015989"
                  stroke-width="1.2"
                />
                <path
                  d="M12.0683 13.2917L12.4792 13.7174L12.9107 13.3125L12.5 12.875L12.9107 13.3124L12.9107 13.3124L12.9109 13.3123L12.9112 13.3119L12.9124 13.3109L12.9163 13.3072L12.9307 13.2935L12.9849 13.2418C13.0321 13.1965 13.1009 13.1299 13.1891 13.0432C13.3654 12.8698 13.6193 12.616 13.9321 12.2913C15.056 11.1247 18.0696 8.59853 20.5214 6.62695C20.6394 6.70996 20.7889 6.81415 20.9 6.8848V17.6502C20.9 18.3515 20.42 18.775 20 18.775H5.00001C4.58001 18.775 4.1 18.3515 4.1 17.6502V6.95104C4.18819 6.94112 4.29198 6.93256 4.39707 6.92719C4.52295 6.92075 4.63715 6.9196 4.72081 6.92369L4.88882 7.06437C5.06386 7.21104 5.3153 7.42198 5.62071 7.67892C6.23161 8.19286 7.05814 8.8906 7.92107 9.62608C9.66203 11.1099 11.5077 12.7109 12.0683 13.2917ZM5 6.375L4.61553 6.83541C4.61551 6.83539 4.61549 6.83538 4.61547 6.83536L5 6.375Z"
                  stroke="#015989"
                  stroke-width="1.2"
                />
              </svg>
            </span>
            <span class="user-desc-info email">${customer.email}</span>
          </div>
          <div class="user-desc-row">
            <span class="user-desc-icon">
              <svg
                width="35"
                height="35"
                viewBox="0 0 17 17"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M10.1039 3.40103L10.104 3.40103C11.713 3.43263 13.1526 4.25792 13.9627 5.60371L14.3054 5.39743L13.9627 5.60372C14.7907 6.97919 14.8128 8.62519 14.0236 10.0159L10.4185 16.3683C10.4183 16.3686 10.4181 16.3689 10.418 16.3692C10.4175 16.3701 10.4172 16.3705 10.4171 16.3707L10.417 16.3708C10.3329 16.5116 10.1813 16.6 10.0001 16.6C9.81876 16.6 9.66717 16.5116 9.58304 16.3708L9.58294 16.3707C9.58281 16.3704 9.58254 16.37 9.58208 16.3692C9.58193 16.3689 9.58175 16.3686 9.58155 16.3683L5.97641 10.0159C5.18718 8.62518 5.20933 6.97919 6.03727 5.60372C6.84737 4.25792 8.28704 3.43263 9.89597 3.40103L9.89605 3.40103C9.96521 3.39966 10.0348 3.39966 10.1039 3.40103ZM7.55492 7.37501C7.55492 8.6957 8.6659 9.74376 10 9.74376C11.3341 9.74376 12.4451 8.6957 12.4451 7.37501C12.4451 6.05432 11.3341 5.00626 10 5.00626C8.6659 5.00626 7.55492 6.05432 7.55492 7.37501Z"
                  stroke="#015989"
                  stroke-width="0.8"
                />
              </svg>
            </span>
            <span class="user-desc-info">
              <span class="street-suite">${customer.address.street}` +
      " " +
      `${customer.address.suite}</span>
              <span class="city-zip">${customer.address.city}` +
      " " +
      `${customer.address.zipcode}</span>, <span class="lat-lng">${customer.address.geo.lat}` +
      " " +
      `${customer.address.geo.lng}</span>
            </span>
          </div>
          <div class="user-desc-row">
            <span class="user-desc-icon">
              <svg
                width="23"
                height="23"
                viewBox="0 0 25 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M21.4579 16.6395C21.4081 16.4516 21.3196 16.2762 21.198 16.1247C21.0763 15.9732 20.9242 15.8488 20.7516 15.7598L17.1264 13.8801C16.8339 13.7249 16.4954 13.6801 16.1726 13.7538C15.8498 13.8276 15.5642 14.015 15.368 14.2818L14.7819 15.0853C14.7518 15.1271 14.7075 15.1564 14.6573 15.1677C14.6071 15.179 14.5545 15.1716 14.5094 15.1469C13.6474 14.6561 12.8583 14.0471 12.1649 13.3376C11.4558 12.6437 10.8472 11.8541 10.3567 10.9916C10.3319 10.9465 10.3245 10.8939 10.3359 10.8436C10.3472 10.7934 10.3765 10.7491 10.4182 10.7189L11.2183 10.1324C11.485 9.93611 11.6722 9.65039 11.7459 9.32741C11.8196 9.00443 11.7749 8.6657 11.6198 8.37299L9.75296 4.74852C9.66331 4.57553 9.53823 4.42338 9.38589 4.30199C9.23354 4.1806 9.05734 4.09269 8.86877 4.044C8.6802 3.99531 8.48349 3.98692 8.29146 4.01938C8.09943 4.05185 7.91639 4.12444 7.75428 4.23242L5.47719 5.75727C5.15744 5.9703 4.89926 6.26366 4.7285 6.60797C4.55774 6.95227 4.4804 7.33543 4.50422 7.71906C4.53436 8.36769 4.62164 9.01239 4.76505 9.64567C5.38341 12.0327 6.87509 14.4871 8.94704 16.5632C11.019 18.6394 13.4748 20.1261 15.8604 20.739C16.4933 20.8825 17.1376 20.9698 17.7858 21H17.9323C18.29 20.9992 18.642 20.9109 18.9577 20.7427C19.2733 20.5746 19.5431 20.3317 19.7434 20.0352L21.2615 17.7567C21.3711 17.5949 21.4452 17.4117 21.479 17.2191C21.5129 17.0266 21.5057 16.829 21.4579 16.6395ZM20.2856 17.1028L18.7763 19.3842C18.6762 19.5322 18.5391 19.6514 18.3787 19.7301C18.2184 19.8088 18.0402 19.8442 17.862 19.8329C17.2871 19.8063 16.7155 19.7308 16.1534 19.6071C13.9672 19.0382 11.7048 17.6629 9.77934 15.7275C7.85392 13.7921 6.4736 11.5371 5.90506 9.34949C5.78042 8.78716 5.70395 8.21522 5.67647 7.63989C5.66476 7.46189 5.70002 7.28393 5.77872 7.12387C5.85741 6.9638 5.97678 6.82725 6.12485 6.72791L8.40195 5.20891C8.43661 5.18569 8.47745 5.17343 8.51917 5.17372H8.57485C8.60371 5.18125 8.63064 5.19481 8.65388 5.21351C8.67712 5.23221 8.69613 5.25563 8.70966 5.28222L10.5853 8.90963C10.6086 8.95461 10.6152 9.00641 10.6039 9.05581C10.5926 9.10521 10.5642 9.149 10.5237 9.17941L9.72365 9.76589C9.45236 9.96786 9.26439 10.2623 9.19527 10.5935C9.12615 10.9247 9.18068 11.2697 9.34854 11.5635C9.89096 12.5122 10.5616 13.3815 11.3414 14.1469C12.1062 14.9273 12.975 15.5983 13.9232 16.141C14.2168 16.3089 14.5616 16.3635 14.8926 16.2943C15.2236 16.2252 15.5179 16.0371 15.7197 15.7656L16.3058 14.9621C16.3362 14.9216 16.38 14.8932 16.4294 14.8819C16.4787 14.8706 16.5305 14.8772 16.5754 14.9006L20.2006 16.7773C20.2272 16.7912 20.2505 16.8105 20.2691 16.834C20.2877 16.8575 20.3012 16.8846 20.3086 16.9137C20.3161 16.9427 20.3174 16.973 20.3124 17.0025C20.3074 17.0321 20.2963 17.0602 20.2797 17.0852L20.2856 17.1028Z"
                  fill="#015989"
                />
              </svg>
            </span>
            <span class="user-desc-info phone">${customer.phone}</span>
          </div>
          <div class="user-desc-row">
            <span class="user-desc-icon">
              <svg
                width="23"
                height="23"
                viewBox="0 0 25 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M6.35151 7.15126L6.34036 7.16824C5.32347 8.34147 4.66289 9.78094 4.43679 11.3173C4.20895 12.8654 4.43196 14.4464 5.07916 15.8713C5.72636 17.2961 6.77036 18.5045 8.08634 19.3519C9.40232 20.1993 10.9346 20.65 12.5 20.65C14.0654 20.65 15.5977 20.1993 16.9137 19.3519C18.2296 18.5045 19.2736 17.2961 19.9208 15.8713C20.568 14.4464 20.791 12.8654 20.5632 11.3173C20.3354 9.76909 19.6663 8.31927 18.636 7.14112L18.6166 7.11889L18.6147 7.11793C18.5992 7.09912 18.582 7.08175 18.5633 7.06605C17.8016 6.21323 16.8685 5.53051 15.825 5.0625C14.7777 4.59282 13.6428 4.35 12.495 4.35C11.3472 4.35 10.2123 4.59282 9.16505 5.0625C8.1213 5.53059 7.18809 6.21347 6.42631 7.0665C6.39751 7.09105 6.37232 7.11959 6.35151 7.15126ZM17.2243 12.899H19.8341C19.7525 14.4294 19.1917 15.8958 18.2308 17.0906C17.7292 16.8073 17.2018 16.5722 16.6558 16.3887C17.0054 15.2572 17.1967 14.0829 17.2243 12.899ZM16.3908 17.1438C16.8364 17.2931 17.2686 17.4795 17.683 17.7011C16.9265 18.4557 16.0157 19.035 15.0153 19.4007C15.5584 18.8114 16.0278 18.0436 16.3908 17.1438ZM6.76367 17.0914C5.80232 15.8965 5.2413 14.4298 5.15966 12.899H7.76947C7.79695 14.0833 7.98825 15.2581 8.33794 16.3899C7.79217 16.5734 7.26504 16.8083 6.76367 17.0914ZM5.15975 12.0992C5.24265 10.5598 5.8104 9.08548 6.78212 7.88762C7.28057 8.16801 7.8043 8.40089 8.34636 8.58319C7.99133 9.72265 7.79716 10.9061 7.76947 12.0992H5.15975ZM12.8969 12.0992V9.22749C13.9095 9.2019 14.9159 9.06092 15.8965 8.80727C16.2238 9.87511 16.403 10.9827 16.4293 12.0992H12.8969ZM12.8969 8.42741V5.19137C13.9778 5.39975 14.9577 6.45015 15.6191 8.05213C14.7282 8.27658 13.8153 8.40244 12.8969 8.42741ZM12.0969 5.19137V8.42741C11.1784 8.40245 10.2656 8.27659 9.37469 8.05213C10.036 6.45015 11.0159 5.39975 12.0969 5.19137ZM9.0974 8.80732C10.078 9.06092 11.0843 9.20189 12.0969 9.22749V12.0992H8.56929C8.59406 10.983 8.77174 9.87536 9.0974 8.80732ZM9.09739 16.1658C8.77435 15.1058 8.59682 14.0068 8.56965 12.899H12.0969V15.7434C11.0842 15.7697 10.0779 15.9114 9.09739 16.1658ZM12.0969 16.5433V19.8068C11.0104 19.5968 10.0214 18.5365 9.36381 16.9212C10.2581 16.695 11.1747 16.5683 12.0969 16.5433ZM12.8969 19.8068V16.5433C13.8191 16.5683 14.7356 16.695 15.6299 16.9212C14.9724 18.5365 13.9834 19.5968 12.8969 19.8068ZM15.8963 16.1646C14.9158 15.9106 13.9095 15.7692 12.8969 15.7433V12.899H16.4241C16.3968 14.0064 16.2193 15.105 15.8963 16.1646ZM19.834 12.0992H17.2243C17.1966 10.9061 17.0024 9.72265 16.6474 8.58319C17.1895 8.40088 17.7132 8.16801 18.2116 7.88762C19.1834 9.08548 19.7511 10.5598 19.834 12.0992ZM16.378 7.82976C16.0174 6.94193 15.554 6.18151 15.0145 5.59773C16.0061 5.96075 16.9096 6.53382 17.662 7.27952C17.25 7.49807 16.8205 7.68212 16.378 7.82976ZM8.6169 7.82974C8.17444 7.6821 7.74501 7.49806 7.33303 7.27951C8.08446 6.53459 8.98671 5.96189 9.97697 5.59872C9.43862 6.18131 8.97687 6.94247 8.6169 7.82974ZM8.60542 17.1438C8.96716 18.0414 9.43255 18.8117 9.97579 19.3997C8.97732 19.0337 8.06836 18.4547 7.31323 17.7011C7.72759 17.4796 8.15983 17.2931 8.60542 17.1438Z"
                  fill="#015989"
                  stroke="#015989"
                  stroke-width="0.3"
                />
              </svg>
            </span>
            <span class="user-desc-info website">${customer.website}</span>
          </div>
          <div class="user-desc-row">
            <span class="user-desc-icon">
              <svg
                width="23"
                height="23"
                viewBox="0 0 25 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M21.4468 6.03087C21.4457 6.03087 21.4445 6.03072 21.4434 6.03072H16.3965V5.4426C16.3965 4.46976 15.6473 3.67825 14.7266 3.67825H10.2734C9.35266 3.67825 8.60352 4.46976 8.60352 5.4426V6.03072H3.55664C3.24672 6.03072 3 6.29905 3 6.61884V19.5574C3 20.5302 3.74915 21.3217 4.66992 21.3217H20.3301C21.2509 21.3217 22 20.5302 22 19.5574V6.63124C22 6.63048 22 6.62971 22 6.62894C21.9787 6.24269 21.7539 6.03302 21.4468 6.03087ZM9.7168 5.4426C9.7168 5.11837 9.96656 4.85449 10.2734 4.85449H14.7266C15.0334 4.85449 15.2832 5.11837 15.2832 5.4426V6.03072H9.7168V5.4426ZM20.671 7.20695L18.9424 12.6859C18.8666 12.9265 18.6544 13.0881 18.4145 13.0881H15.2832V12.5C15.2832 12.1752 15.034 11.9119 14.7266 11.9119H10.2734C9.96598 11.9119 9.7168 12.1752 9.7168 12.5V13.0881H6.58555C6.34564 13.0881 6.13342 12.9265 6.05761 12.6859L4.32898 7.20695H20.671ZM14.1699 13.0881V14.2643H10.8301V13.0881H14.1699ZM20.8867 19.5574C20.8867 19.8816 20.637 20.1455 20.3301 20.1455H4.66992C4.36304 20.1455 4.11328 19.8816 4.11328 19.5574V10.2429L5.00144 13.0579C5.22903 13.7796 5.86568 14.2643 6.58555 14.2643H9.7168V14.8525C9.7168 15.1773 9.96598 15.4406 10.2734 15.4406H14.7266C15.034 15.4406 15.2832 15.1773 15.2832 14.8525V14.2643H18.4145C19.1343 14.2643 19.771 13.7796 19.9986 13.0579L20.8867 10.2429V19.5574Z"
                  fill="#015989"
                />
              </svg>
            </span>
            <span class="user-desc-info company-name">${customer.company.name}</span>
          </div>
          <div class="user-desc-row">
            <span class="user-desc-icon">
              <svg
                width="17"
                height="17"
                viewBox="0 0 19 19"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M17.9387 17.2212H17.2212V9.32812C17.2211 9.18473 17.1781 9.04464 17.0978 8.92588C17.0174 8.80711 16.9033 8.71512 16.7702 8.66174L9.59477 5.79155C9.41803 5.72083 9.22044 5.72322 9.04546 5.79818C8.87049 5.87315 8.73246 6.01455 8.66174 6.19129C8.59102 6.36803 8.59341 6.56562 8.66838 6.7406C8.74334 6.91557 8.88475 7.0536 9.06148 7.12432L15.7861 9.81405V11.4808H10.7632C10.5729 11.4808 10.3904 11.5564 10.2558 11.6909C10.1213 11.8255 10.0457 12.008 10.0457 12.1983C10.0457 12.3886 10.1213 12.5711 10.2558 12.7057C10.3904 12.8403 10.5729 12.9159 10.7632 12.9159H15.7861V14.351H10.7632C10.5729 14.351 10.3904 14.4266 10.2558 14.5611C10.1213 14.6957 10.0457 14.8782 10.0457 15.0685C10.0457 15.2588 10.1213 15.4413 10.2558 15.5759C10.3904 15.7105 10.5729 15.7861 10.7632 15.7861H15.7861V17.2212H8.55317L7.17304 0.657992C7.1581 0.478611 7.07629 0.311397 6.94383 0.189516C6.81137 0.0676352 6.63793 -9.08068e-06 6.45793 9.14319e-10H3.58774C3.40774 -9.08068e-06 3.23431 0.0676352 3.10185 0.189516C2.96939 0.311397 2.88757 0.478611 2.87263 0.657992L1.4925 17.2212H0.717548C0.527242 17.2212 0.344731 17.2968 0.210165 17.4313C0.0755986 17.5659 0 17.7484 0 17.9387C0 18.129 0.0755986 18.3115 0.210165 18.4461C0.344731 18.5807 0.527242 18.6562 0.717548 18.6562H17.9387C18.129 18.6562 18.3115 18.5807 18.4461 18.4461C18.5807 18.3115 18.6562 18.129 18.6562 17.9387C18.6562 17.7484 18.5807 17.5659 18.4461 17.4313C18.3115 17.2968 18.129 17.2212 17.9387 17.2212ZM5.79779 1.4351L6.03695 4.30529H4.00865L4.24788 1.4351H5.79779ZM3.88911 5.74038H6.15656L7.1132 17.2212H2.93248L3.88911 5.74038Z"
                  fill="#015989"
                />
              </svg>
            </span>
            <span class="user-desc-info company-bs">${customer.company.bs}</span>
          </div>
        </div>
      </div>
          `;
    rowUserList.appendChild(customerInfo);
    loaderSection.style.display = "none";
  });
}

function searchedCustomers() {
  const filteredData = customersData.filter((customer) =>
    customer.name.toLowerCase().includes(searchInput.value)
  );

  displayCustomers(filteredData);

  if (filteredData.length > 0) {
    // console.log("show");
    alertMsg.style.display = "none";
  } else {
    // console.log("not show");
    alertMsg.style.display = "block";
  }
}

function sortCustomersAz() {
  customersData.sort((a, b) => a.name.localeCompare(b.name));
  displayCustomers(customersData);
  alertMsg.style.display = "none";
}

function sortCustomersZa() {
  customersData.sort((a, b) => b.name.localeCompare(a.name));
  displayCustomers(customersData);
  alertMsg.style.display = "none";
}
